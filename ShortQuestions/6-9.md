**7. Explain how Controller Advices work, is there any other approach to do same/similar global API exception handling?**

A Controller Advice acts as a "global interceptor" for exceptions thrown by @RequestMapping methods. When a controller throws an exception, the Spring Framework looks for a class annotated with @ControllerAdvice to see if it has a matching handler.

- Detection: At startup, Spring scans for classes annotated with @ControllerAdvice (or @RestControllerAdvice).

- Mapping: Inside these classes, you define methods annotated with @ExceptionHandler(ExceptionType.class).

- Interception: When a request hits a controller and an error occurs, the DispatcherServlet delegates the error to the advice.

- Response: The advice method processes the exception and returns a standard ResponseEntity (JSON, XML, or a View).

Alternatives

A. HandlerExceptionResolver (The Low-Level Way)

Before @ControllerAdvice existed, developers implemented the HandlerExceptionResolver interface. It provides a resolveException method where you can manually check the exception type and return a ModelAndView.

Pros: Very flexible; gives you direct access to the HttpServletRequest.

Cons: More boilerplate code; harder to manage than simple annotations.

B. ResponseStatusException (The Programmatic Way)

Introduced in Spring 5, this allows you to throw an exception directly from your business logic with a specific status code and message.

```
throw new ResponseStatusException(HttpStatus.NOT_FOUND, "User not found");
```

Pros: No need to create custom exception classes or extra advice methods.

Cons: Harder to maintain if you want a consistent error schema across the whole app.

C. ErrorController (The "Catch-All" Way)

If an error happens outside the controller (e.g., a 404 for a URL that doesn't exist or an error in a Filter), @ControllerAdvice won't catch it. In this case, Spring uses a default /error path.

Usage: You can implement the ErrorController interface to customize the global "White Label Error Page" or the JSON response for system-level errors.

D. SimpleMappingExceptionResolver

A configuration-based approach where you map exception class names to specific view names (HTML pages).

Best for: Older MVC applications that serve JSP/Thymeleaf pages rather than JSON APIs.


**8. What's the difference between throwing a regular exception and a customized API exception that will be eventually thrown to Controller Advice codes? Please provide screenshots to explain your findings.**

1. Throwing a Regular Exception

When you throw a standard exception—like RuntimeException or IllegalArgumentException—without a specific handler, Spring falls back to its default error handling mechanism (the WhiteLabel Error Page).

The Result (What the user sees)

The client receives a generic 500 Internal Server Error.

- Ambiguity: The user doesn't know if they did something wrong or if the server crashed.

- Security Risk: It might leak stack traces or internal class names in the response body.

- Hard to Parse: The format is often a bulky JSON block that doesn't follow your API's standard structure.

2. Throwing a Customized API Exception

A custom exception is a specific class you create that extends RuntimeException. It is designed to be caught by a @ControllerAdvice global handler.

The Workflow

- Define the Exception: Create a specific class (e.g., UserNotFoundException).

- Define a Global Response Format: A consistent "Error Response" POJO.

- The Handler: A @ControllerAdvice class that "traps" these specific exceptions and converts them into clean JSON.


**9. Write some regular expression to restrict the value of attributes that your Post or Comment can have. You may use https://regex101.com/ to construct and test/validate your regular expression.**

1. username(author)

```
^[a-zA-Z][a-zA-Z0-9._-]{2,15}$

Explanation:

^[a-zA-Z]: Must start with a letter.

[a-zA-Z0-9._-]{2,15}: Followed by 2 to 15 characters of letters, numbers, dots, underscores, or hyphens.

$: End of string.
```


2. Post title

```

^[\w\s\d.,!?']{5,100}$

Explanation:

Allows word characters, spaces, digits, and basic punctuation for 5 to 100 characters.

```

3. Post body

```
^[^<>]{1,500}$

Explanation:

While regex isn't a replacement for a proper HTML sanitizer, this pattern allows standard text and punctuation while explicitly forbidding < and > to prevent basic script injection.

[^<>]: Matches any character except the less-than or greater-than symbols.

{1, 500} length between 1 to 500
```

